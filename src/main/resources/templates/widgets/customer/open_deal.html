<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
      * {
          font-family: "Pretendard GOV", sans-serif !important;
      }
    </style>
  </head>
  <body style="width: 830px" >
    <div th:fragment="open_deal">
      <div class="d-flex flex-column dm-1 px-3 py-3 border rounded">
        <h5 class="fw-bold">제안서 요청</h5>
          <div class="d-flex flex-row column-gap-3">
            <!------------------------------------------>
            <div class="d-flex flex-fill flex-column">
              <span class="mb-2">인기 코스</span>
              <div class="d-flex flex-column align-items-stretch row-gap-2">
                <div class="d-flex flex-row align-items-center border ps-3 pe-1 py-1" th:each="popular_course: ${popular_courses}">
                  <span th:text="${popular_course.COURSE_NAME}" >코스1</span>
                  <button class="btn ms-auto py-0 px-2">▶</button>
                </div>
              </div>
            </div>
            <!------------------------------------------>
            <div class="d-flex flex-fill flex-column bg-red">
              <span class="mb-2">새 코스</span>
              <div class="d-flex flex-column align-items-stretch row-gap-2">
                <div class="d-flex flex-row align-items-center border ps-3 pe-1 py-1" th:each="deal_on_new_course: ${deals_on_new_course}">
                  <span>제안서</span>
                  <button class="btn ms-auto py-0 px-2">×</button>
                </div>
                <button class="btn border py-0 align-self-stretch text-center" onclick="addDeal()">
                  +
                </button>
              </div>
            </div>
            <!------------------------------------------>
            <div class="flex-fill">
              <span class="mb-2 ">세부내용</span>
            </div>
            <!------------------------------------------>
          </div>
      </div>
      <script>
        function selectDeal() {
        }
        function addDeal() {
          $.ajax({
            type: 'POST',
            url: '/open_deal/add_deal',
            data: JSON.stringify({}),
            success: function (data) {
                if (data.status != 'ok') {
                    alert("오류가 발생하였습니다.\n" + data.msg);
                    throw data.msg;
                }
                window.location = window.location;
            },
            contentType: 'application/json',
            dataType: 'json'
          });
        }
        function updateDeal() {
        }
        function removeDeal() {
        }

      </script>
    </div>
    <script src="/static/js/bootstrap.bundle.min.js" ></script>
    <script src="/static/js/jquery-3.7.1.min.js" ></script>
  </body>
</html>
